# Petal 项目 🐾 - 你的桌面萌宠伴侣——初稿

欢迎来到 Petal 项目！这是一款旨在为用户桌面带来乐趣与陪伴的 Python 桌面宠物应用程序。如果你希望在学习和工作之余，能有一位可爱的虚拟伙伴点缀屏幕，那么 Petal 正是为你准备的。

## ✨ 主要特性

*   **动态桌面宠物**: Petal 会在你的桌面上展示一个可爱的宠物角色 (当前主打 "Kitty" 🐱)，它拥有多种随机动画，如走动、跳跃、思考等，为你的桌面注入活力。
*   **宠物状态管理**:
    *   ❤️ **HP (生命值)**: 宠物的健康状况会随时间自动缓慢下降。(*未来可扩展通过特定物品或交互恢复HP*)
    *   ⚡ **EM (情绪值/能量值)**: 宠物的精神状态也会随时间自动缓慢下降。(*未来可扩展通过特定物品或交互提升EM*)
    *   宠物状态值会通过界面上的进度条实时显示。
*   **物品系统 (基础)**:
    *   项目代码中已包含宠物数据结构 (`data/Kitty.json`)，其中定义了物品字段，例如 "汉堡" 和 "薯条"。
    *   当前版本主要体现在数据结构上，具体物品效果和交互逻辑有待进一步开发。
*   **核心互动功能**:
    *   🖱️ **鼠标拖拽**: 用户可以按住鼠标左键拖动宠物在桌面上的位置。
    *   💨 **拖拽后抛出/掉落**: 释放鼠标后，宠物会根据拖拽的速度和方向继续滑行一段距离，并模拟重力效果自然下落，直到接触到屏幕边缘或“地面”。
    *   🐾 **随机行为**: 宠物会根据预设的动作概率，在空闲时随机执行不同的动画序列。
    *   ContextMenu (右键菜单): 右键点击宠物会弹出功能菜单，具体功能项在 `Petaler/Petaler.py` 的 `_show_right_menu` 方法中定义 (当前版本可能包含退出、切换宠物等基础功能)。
*   **计划任务与提醒**:
    *   ⏰ **番茄钟**: 内置番茄工作法计时器。用户可以设置多个番茄钟，每个番茄钟包含工作时间和休息时间。程序会按时提醒用户开始工作、休息以及所有番茄钟结束。
    *   🎯 **专注模式**: 用户可以设定一段专注时间（按时长或指定结束时间点），在此期间宠物会进入专注状态，并在结束后提醒用户。
    *   🔔 **提醒事项**: 用户可以添加一次性或重复性的提醒。提醒可以按相对时间（例如X小时Y分钟后）或绝对时间点（例如每天的HH:MM）设置。到点后宠物会弹出对话框提醒用户。
    *   👋 **定时问候**: 宠物会根据当前时间（早上、中午、下午、晚上）向用户发出问候。
*   **多宠物支持 (基础)**:
    *   系统设计上支持加载多个宠物的数据 (通过 `data/pets.json` 和 `Petaler.PetWidget` 的 `pets` 参数)。
    *   切换不同宠物的功能可能通过右键菜单实现。

## 📂 项目结构概览
```
StartFromZero/
├── Petaler/         # 主要应用程序代码目录
│   ├── Petaler.py   # 宠物窗口 (PetWidget) 的核心实现，处理UI、事件、线程管理
│   ├── modules.py   # 包含动画、交互、计划任务的核心逻辑 Worker 类
│   ├── conf.py      # 宠物配置类 (PetConfig, Act) 定义
│   ├── settings.py  # 全局状态变量管理 (如拖拽状态、图像、鼠标位置等)
│   ├── utils.py     # 工具函数 (如JSON读写、图像加载)
│   └── extra_windows.py # 额外的窗口类 (如设置窗口，当前未详细分析)
│   └── __init__.py
│   └── 00*.py       # 旧版，辅助模块
├── data/            # 应用程序数据目录
│   ├── Kitty.json   # 宠物 "Kitty" 的具体数据 (HP, EM, 物品等)
│   ├── pets.json    # 定义了可用宠物列表及其配置文件路径
│   └── remindme.txt # 提醒事项的持久化存储
├── res/             # 资源文件目录
│   ├── font/        # 字体文件
│   ├── icons/       # 图标文件 (HP, EM, Timer 等)
│   └── role/        # 角色特定资源
│       └── Kitty/   # "Kitty" 角色的图像、动画帧等资源
├── run_Petaler.py   # 启动应用程序的脚本，加载数据，初始化QApplication
└── README.md        # 项目说明文件
```

## 🚀 快速开始

要运行 Petaler，请遵循以下步骤：

1.  **环境配置**:
    *   确保你已安装 Python。项目代码中使用了 f-string、类型提示等特性，推荐 **Python 3.10+**。
    *   安装项目依赖：
        *   **PyQt5**: 用于构建图形用户界面。
            ```bash
            pip install PyQt5
            ```
        *   **APScheduler**: 用于处理定时任务 (番茄钟、提醒等)。
            ```bash
            pip install apscheduler
            ```
        *   (可选，根据 `res/role/Kitty` 下的文件类型推断) **Pillow (PIL)**: 如果角色动画帧是常见图像格式，可能需要 Pillow 进行加载和处理。
            ```bash
            pip install Pillow
            ```
    *   (推荐) 使用虚拟环境以隔离项目依赖：
        ```bash
        python -m venv venv
        # Windows:
        venv\Scripts\activate
        # macOS/Linux:
        source venv/bin/activate
        ```

2.  **启动应用**:
    在项目根目录 `StartFromZero/`下，执行：
    ```bash
    python run_Petaler.py
    ```
    成功后，你的桌面宠物便会出现。

## 🛠️ 技术选型

*   **编程语言**: Python (3.10.x 在开发环境中使用)
*   **GUI 框架**: PyQt5
*   **定时任务**: APScheduler
*   **图像处理**: PyQt5 内置的 QImage, QPixmap 等
*   **数据格式**: JSON (用于宠物数据和配置)

## 📝 注意事项

*   `__pycache__` 目录是 Python 解释器自动生成的字节码缓存文件夹，可以安全地忽略，它有助于加快后续的加载速度。
*   `00*.py` 文件是早期模块或有特定加载顺序的模块，具体功能需进一步查看。
*   项目通过 `settings.py` 管理全局状态，各模块通过该文件共享数据。
*   项目使用了多线程 (`QThread`) 来处理动画 (`Animation_worker`)、交互 (`Interaction_worker`) 和计划任务 (`Scheduler_worker`)，避免阻塞主UI线程。

## 展望未来

我们计划在未来为 Petaler 添加更多激动人心的功能：

*   🌟 **新宠物角色**: 引入更多不同种类的宠物，提供多样化的选择。
*   🍲 **完善物品系统**: 实现物品的实际效果，例如使用“汉堡”恢复HP，使用“咖啡”提升EM等。
*   🎮 **增强互动性**:
    *   实现更丰富的对用户操作的反馈 (例如点击、抚摸等)。
    *   开发与宠物互动的小游戏。
    *   赋予宠物更智能的自主行为，例如根据用户活动或系统状态做出反应。
*   🎨 **界面与体验优化**:
    *   构建更完善的用户设置界面，允许用户自定义宠物行为、外观、提醒等。
    *   优化动画效果和资源管理。
*   💾 **数据持久化改进**: 更系统地管理用户数据和设置。

## 🧑‍💻 开发团队

*   (请在此处填写开发团队或个人的信息)

---
