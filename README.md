# Petal 项目 🐾 - 你的桌面萌宠伴侣

欢迎来到 Petal 项目！这是一款旨在为用户桌面带来乐趣与陪伴的 Python 桌面宠物应用程序。如果你希望在学习和工作之余，能有一位可爱的虚拟伙伴点缀屏幕，那么 Petal 正是为你准备的。

## ✨ 主要特性

*   **动态桌面宠物**: Petal 会在你的桌面上展示一个可爱的宠物角色，它拥有多种随机动画，如走动、跳跃、思考等，为你的桌面注入活力。
*   **宠物状态管理**:
    *   ❤️ **HP (生命值)**: 宠物的健康状况会随时间自动缓慢下降，可通过交互恢复HP。(*未来可扩展通过特定物品恢复HP*)
    *   ⚡ **EM (情绪值/能量值)**: 宠物的精神状态也会随时间自动缓慢下降，可通过交互恢复EM。(*未来可扩展通过特定物品恢复EM*)
    *   宠物状态值会通过界面上的进度条实时显示。
*   **物品系统 (基础)**:
    *   项目代码中已包含宠物数据结构 (`data/Kitty.json`)，其中定义了物品字段，例如 "汉堡" 和 "薯条"。
    *   当前版本主要体现在数据结构上，具体物品效果和交互逻辑有待进一步开发。
*   **核心互动功能**:
    *   🖱️ **鼠标拖拽**: 用户可以按住鼠标左键拖动宠物在桌面上的位置。
    *   💨 **拖拽后抛出/掉落**: 释放鼠标后，宠物会根据拖拽的速度和方向继续滑行一段距离，并模拟重力效果自然下落，直到接触到屏幕边缘或“地面”。
    *   🐾 **随机行为**: 宠物会根据预设的动作概率，在空闲时随机执行不同的动画序列。
    *   ContextMenu (右键菜单): 右键点击宠物会弹出功能菜单，当前版本可能包含退出、切换宠物等基础功能。
*   **计划任务与提醒**:
    *   ⏰ **番茄钟**: 内置番茄工作法计时器。用户可以设置多个番茄钟，每个番茄钟包含工作时间和休息时间。程序会按时提醒用户开始工作、休息以及所有番茄钟结束。
    *   🎯 **专注模式**: 用户可以设定一段专注时间（按时长或指定结束时间点），在此期间宠物会进入专注状态，并在结束后提醒用户。
    *   🔔 **提醒事项**: 用户可以添加一次性或重复性的提醒。提醒可以按相对时间（例如X小时Y分钟后）或绝对时间点（例如每天的HH:MM）设置。到点后宠物会弹出对话框提醒用户。
    *   👋 **定时问候**: 宠物会根据当前时间（早上、中午、下午、晚上）向用户发出问候。
*   **多宠物支持 (基础)**:
    *   系统设计上支持加载多个宠物的数据 (通过 `data/pets.json` 和 `Petaler.PetWidget` 的 `pets` 参数)。
    *   切换不同宠物的功能可能通过右键菜单实现。


## 🚀 快速开始

要运行 Petaler，请遵循以下步骤：

1.  **克隆项目**:
    ```bash
    git clone https://github.com/Hsch22/Petaler.git 
    cd Petaler
    ```

2.  **环境配置**:
    *   确保你已安装 Python。项目代码中使用了 f-string、类型提示等特性，推荐 **Python 3.10.16**。
        ```bash
        conda create --name petaler_env python=3.10.16
        conda activate petaler_env
        pip install -r requirements.txt
        ```
    *   (推荐) 使用虚拟环境以隔离项目依赖：


3.  **启动应用**:
    在项目根目录下运行：
    ```bash
    python run_Petaler.py
    ```


## 📝 注意事项

*   `__pycache__` 目录是 Python 解释器自动生成的字节码缓存文件夹，可以安全地忽略，它有助于加快后续的加载速度。
*   项目通过 `settings.py` 管理全局状态，各模块通过该文件共享数据。
*   项目使用了多线程 (`QThread`) 来处理动画 (`Animation_worker`)、交互 (`Interaction_worker`) 和计划任务 (`Scheduler_worker`)，避免阻塞主UI线程。

## 展望未来

我们计划在未来为 Petaler 添加更多激动人心的功能：

*   🌟 **新宠物角色**: 引入更多不同种类的宠物，提供多样化的选择。
*   🍲 **完善物品系统**: 实现物品的实际效果，例如使用“汉堡”恢复HP，使用“咖啡”提升EM等。
*   🎮 **增强互动性**:
    *   实现更丰富的对用户操作的反馈 (例如抚摸等)。
    *   开发与宠物互动的小游戏。
    *   赋予宠物更智能的自主行为，例如根据用户活动或系统状态做出反应。
*   🎨 **界面与体验优化**:
    *   构建更完善的用户设置界面，允许用户自定义宠物行为、外观、提醒等。
    *   优化动画效果和资源管理。
*   💾 **数据持久化改进**: 更系统地管理用户数据和设置。

---
